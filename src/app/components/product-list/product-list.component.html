<div class="product-container">
  <div class="filter-panel">
    <h3>Filters</h3>
    
    <div class="filter-section">
      <label for="search">Search:</label>
      <input 
        type="text" 
        id="search" 
        [(ngModel)]="searchKeyword" 
        placeholder="Search by title or category..."
        (input)="onSearchChange()"
      >
    </div>

    <div class="filter-section">
      <label for="sort">Sort by Price:</label>
      <select id="sort" [(ngModel)]="sortOrder" (change)="onSortChange()">
        <option value="none">No Sorting</option>
        <option value="asc">Price: Low to High</option>
        <option value="desc">Price: High to Low</option>
      </select>
    </div>
    
    <div class="filter-section">
      <label for="category">Category:</label>
      <select id="category" [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
        <option value="">All Categories</option>
        <option *ngFor="let category of categories" [value]="category">
          {{ category }}
        </option>
      </select>
    </div>

    <div class="filter-section">
      <label for="minPrice">Min Price: ${{ minPrice }}</label>
      <input 
        type="range" 
        id="minPrice" 
        [(ngModel)]="minPrice" 
        min="0" 
        max="100" 
        step="0.01"
        (input)="onPriceRangeChange()"
      >
    </div>

    <div class="filter-section">
      <label for="maxPrice">Max Price: ${{ maxPrice }}</label>
      <input 
        type="range" 
        id="maxPrice" 
        [(ngModel)]="maxPrice" 
        min="0" 
        max="100" 
        step="0.01"
        (input)="onPriceRangeChange()"
      >
    </div>

    <button class="clear-filters-btn" (click)="clearFilters()">
      Clear Filters
    </button>
  </div>

  <div *ngIf="isLoading; else contentTemplate">
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <p>Loading products...</p>
    </div>
  </div>

  <ng-template #contentTemplate>
    <div class="product-grid" *ngIf="filteredProducts.length > 0; else noProductsTemplate">
      <div class="results-info">
        <p>Showing {{ filteredProducts.length }} of {{ products.length }} products</p>
      </div>
      <div class="product-card" *ngFor="let product of filteredProducts; trackBy: trackByProductId">
        <div class="product-image">
          <img [src]="product.image" [alt]="product.title" loading="lazy">
        </div>
        <div class="product-info">
          <h3 class="product-title">{{ product.title }}</h3>
          <p class="product-category">{{ product.category }}</p>
          <p class="product-price">${{ product.price.toFixed(2) }}</p>
          <button class="add-to-cart-btn" (click)="addToCart(product)">
            Add to Cart
          </button>
        </div>
      </div>
    </div>

    <ng-template #noProductsTemplate>
      <div class="no-products">
        <p>No products found matching your filters.</p>
      </div>
    </ng-template>
  </ng-template>
</div> 